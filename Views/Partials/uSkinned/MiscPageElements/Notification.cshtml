@inherits UmbracoViewPage<SiteBuilderBaseViewModel>
@using USNSiteBuilder.Core.Models
@using USNSiteBuilder.Core.Extensions
@using USNSiteBuilder.Core.Interfaces
@inject ISiteBuilderService _siteBuilderService
@{
    UsnglobalSettings globalSettings = (UsnglobalSettings)Model.GlobalSettings;
    Usnstyle websiteStyle = (Usnstyle)Model.WebsiteStyle;

    string positionClass = websiteStyle.StyleLayout.notificationHorizontalPosition.HasValue() ? websiteStyle.StyleLayout.notificationHorizontalPosition.ToString() : String.Empty;

    if (globalSettings.EnableNotification)
    {
        string backgroundColorClass = _siteBuilderService.GetBackgroundColorClass(globalSettings.NotificationContentColors.sortOrder, "content", websiteStyle);
        string buttonColorLabel = globalSettings.NotificationButtonColor.label;
        string buttonColorClass = _siteBuilderService.GetBackgroundColorClass(globalSettings.NotificationButtonColor.sortOrder, "button", websiteStyle);
        string buttonHoverColorClass = _siteBuilderService.GetBackgroundColorClass(globalSettings.NotificationButtonColor.sortOrder, "buttonHover", websiteStyle);
        string buttonSizeClass = globalSettings.NotificationButtonSize;
        string buttonStyleClass = globalSettings.NotificationButtonStyle;

        <!-- Notification -->
        <div class="usn-notification @positionClass @backgroundColorClass closed" id="NotificationPanel">
            <div class="inner">

                @await Html.PartialAsync(Model.ThemeFolder + "/MiscPageElements/Headings", new ViewDataDictionary(ViewData) { { "headingOrder", websiteStyle.StyleLayout.headingOrder }, { "animation", null }, { "heading", globalSettings.NotificationHeading }, { "secondaryHeading", globalSettings.NotificationSecondaryHeading }, { "backgroundColorLabel", globalSettings.NotificationContentColors.label } })

                @if (globalSettings.NotificationText.HasValue())
                {
                    <div class="text @(globalSettings.NotificationContentColors.label)-text">
                        @Html.Raw(globalSettings.NotificationText)
                    </div>
                }
                <p class="link">
                    <button class="btn @buttonSizeClass @buttonStyleClass @buttonColorClass @buttonHoverColorClass @(buttonColorLabel)-btn-text @(buttonColorLabel)-btn-borders accept-cookies">
                        <span></span>
                        @(globalSettings.AcceptNotificationButtonText.HasValue() ? globalSettings.AcceptNotificationButtonText : Umbraco.GetDictionaryValue("USN Notification Button Text"))
                    </button>
                </p>
            </div>
        </div>
        <!--// Notification -->
    }
}